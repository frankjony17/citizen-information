<md-content>
    <ng-form name=consultarEmailCtrl.consultarEmailForm>
        <md-card md-theme-watch style="border-top: 1px solid rgba(0, 0, 0, 0.12)">
            <md-card-content>
                <md-card>
                    <md-content>
                        <h1>Consultar E-mails de Alerta</h1>
                    </md-content>
                    <!-- FORM PESQUISAR -->
                    <md-card-content>
                        <!-- Tipo de Solicitação --- Tipo de Alerta -->
                        <div layout="row" layout-align="start" flex>
                            <md-input-container flex="50">
                                <label class="tamanho-text">Tipo de Solicitação</label>
                                <md-select name="tipoSolicitacao"
                                           ng-model="consultarEmailCtrl.tipoSolicitacaoModel"
                                           ng-change="consultarEmailCtrl.comboTipoSolicitacaoChange(consultarEmailCtrl.tipoSolicitacaoModel.nome)"
                                           ng-model-options="{trackBy: '$value.id'}">
                                    <md-option ng-repeat="tipo in consultarEmailCtrl.tipoSolicitacaoList" ng-value="tipo">
                                        {{ tipo.nome }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <!---->
                            <span style="width: 30px">&nbsp;</span>
                            <!---->
                            <md-input-container flex="50">
                                <label class="tamanho-text">Tipo de Alerta</label>
                                <md-select name="tipoAlerta"
                                           ng-model="consultarEmailCtrl.tipoAlertaModel"
                                           ng-model-options="{trackBy: '$value.id'}">
                                    <md-option ng-repeat="tipo in consultarEmailCtrl.tipoAlertaList" ng-value="tipo">
                                        {{ tipo.nome }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                        <!-- Destinatários --- Assunto -->
                        <div layout="row" layout-align="start" flex>
                            <md-input-container flex="50">
                                <label class="tamanho-text">Destinatários</label>
                                <md-select ng-model="consultarEmailCtrl.destinatarioModel"
                                           ng-model-options="{trackBy: '$value.id'}"
                                           data-md-container-class="selectdemoSelectHeader"
                                           multiple>
                                    <md-option ng-repeat="dest in consultarEmailCtrl.destinatarioList" ng-value="dest">
                                        {{ dest.nome }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <!---->
                            <span style="width: 30px">&nbsp;</span>
                            <!---->
                            <md-input-container flex="50">
                                <label class="tamanho-text">Assunto</label>
                                <md-select name="assunto"
                                           ng-model="consultarEmailCtrl.assuntoModel"
                                           ng-model-options="{trackBy: '$value'}">
                                    <md-option ng-repeat="ass in consultarEmailCtrl.assuntoList" ng-value="ass">
                                        {{ ass }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                        <!---->
                        <br>
                        <!-- -->
                        <div layout="row" layout-align="end right">
                            <md-button class="md-raised md-primary" ng-click="consultarEmailCtrl.limpar()">
                                Limpar
                            </md-button>
                            <md-button id="btn-buscar" class="md-raised md-primary" ng-click="consultarEmailCtrl.consultar()">
                                Pesquisar
                            </md-button>
                            <md-button id="btn-cadastrar" class="md-raised md-primary" ng-click="consultarEmailCtrl.cadastrar()">
                                Novo
                            </md-button>
                        </div>
                        <!---->
                        <br>
                        <!-- -->
                        <md-table-container>
                            <table md-table>
                                <thead md-head>
                                <tr md-row>
                                    <th md-column>Tipo de Solicitação</th>
                                    <th md-column>Tipo de Alerta</th>
                                    <th md-column>Destinatário</th>
                                    <th md-column>Assunto</th>
                                    <th md-column style="text-align: center; width: 120px">Ações</th>
                                </tr>
                                </thead>
                                <tbody md-body>
                                <tr md-row ng-repeat="email in consultarEmailCtrl.emailList">
                                    <td md-cell>
                                        {{ email.descricaoTipoSolicitacao }}
                                    </td>
                                    <td md-cell>
                                        {{ email.descricaoTipoAlerta }}
                                    </td>
                                    <td md-cell>
                                        <span ng-repeat="des in email.destinatarios track by $index">
                                            <p>{{ des.nome }}</p><hr ng-if="email.destinatarios.length > 1 && email.destinatarios.length > $index + 1"/>
                                        </span>
                                    </td>
                                    <td md-cell>
                                        {{ email.assuntoEmail }}
                                    </td>
                                    <td md-cell style="text-align: center; padding: 2px;">
                                        <ng-md-icon icon="search" ng-click="consultarEmailCtrl.detalhar(email)">
                                            <md-tooltip>Detalhar</md-tooltip>
                                        </ng-md-icon>
                                        <ng-md-icon icon="mode_edit" ng-click="consultarEmailCtrl.editar(email)" >
                                            <md-tooltip>Editar</md-tooltip>
                                        </ng-md-icon>
                                        <ng-md-icon icon="delete" ng-click="consultarEmailCtrl.excluir(email.id)" >
                                            <md-tooltip>Excluir</md-tooltip>
                                        </ng-md-icon>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </md-table-container>
                        <md-table-pagination style="margin: auto; background-color: #D8F8E1;"
                                             md-on-paginate="consultarEmailCtrl.consultar"
                                             md-limit="consultarEmailCtrl.tabelaConsulta.limit"
                                             md-limit-options="consultarEmailCtrl.tabelaConsulta.limitsPage"
                                             md-page="consultarEmailCtrl.tabelaConsulta.page"
                                             md-total="{{consultarEmailCtrl.totalElementosConsulta}}"
                                             md-page-select>
                        </md-table-pagination>
                    </md-card-content>
                </md-card>
            </md-card-content>
        </md-card>
    </ng-form>
</md-content>
